# SportEase

富山高専のSPORTSDAYを自分で作る。

春季スポーツ大会、秋季スポーツ大会に対応させる。
クラス(1-1,1-2,1-3,IS2,It2,IE2,IS3,IT3,IE3,IS4,IT4,IE4,IS5,IT5,IE5,専教)に対応させる。
各クラスは全ての競技に参加する。

春季スポーツ大会での結果を秋季スポーツ大会にも引き継ぐ。

# 技術構成

- フロントエンド
    - SvelteKit
    - Vite
    - TailwindCSS
    - 行事委員会のサーバー(nitsche-gyouji.com)
- バックエンド
    - gin
    - render
- データベース
    - supabase(postgresql)
- モバイルアプリ
    - Flutter(android)

# 各ユーザーごとの機能

## 共通機能

全てのユーザーに共通する機能です。

- 認証
    - Google OAuth 2.0 による認証
    - @sendai-nct.jpを持つアカウントのみのログインを許可
    - 事前に登録されたメールアドレス(ホワイトリスト)に含まれるユーザーのみログインを許可
- プロフィール設定
    - 初回ログイン時にアプリ内で使用する表示名を設定する画面へリダイレクト
    - 表示名設定が完了するまでメイン機能(ダッシュボードなど)は利用不可

## 管理者(root)

- 全ての機能
    - データベースの直接操作やシステム設定の変更など、実行委員管理者を含む全ての機能へのアクセス権を持つ

## 管理者(実行委員)

管理者は、大会運営全般を管理するための権限と機能を持つ。

- アクセス可能なアプリ
    - 管理者アプリ
    - 学生アプリ
        - 自身が競技に参加する場合、学生用アプリから自身のQRコードを発行可能
- 機能と権限
    - **ダッシュボード**
        - 登録済みスポーツの一覧表示
        - 試合予定の表示
        - 未入力の試合結果の一覧表示
    - **スポーツ管理**
        - スポーツの一覧を閲覧
        - スポーツの新規作成(概要、ルール含む)
        - 既存のスポーツ情報を編集する
        - スポーツを削除する
    - **クラス・チーム管理**
        - 登録済みのクラスやチームを一覧表示する
        - 新しいクラスやチームを登録する
        - 既存のクラスやチーム情報を編集する
        - クラスやチームを削除する
    - **学生管理**
        - ログインした全学生のリスト(表示名、メールアドレス)を閲覧する
    - **参加者登録**
        - 各スポーツに参加する学生やチームを割り当てる
        - 参加者をクラス単位で一括登録する
        - 参加者を個人単位で登録する
    - **トーナメント・試合管理**
        - 参加者情報に基づきトーナメント表を自動生成する
        - トーナメントには試合時間やコート番号もいれる(トーナメントにいれるか別で用意するかは要検討)
        - 試合結果(スコアなど)を入力・更新する
        - 入力された結果に基づき、勝者を自動で次の試合に進める
        - 試合結果に応じて、クラスごとの得点を自動で付与する
    - **QRコードリーダー**
        - デバイスのカメラを起動し、QRコードを読み取る
        - 読み取ったQRコードから学生情報を特定し、本人確認を行う
        - 対象の競技への参加受付(チェックイン)処理を実行する
    - **通知作成**
        - 通知を新規作成する(タイトル、本文)
        - 通知の送信対象を選択する(全学生、特定のクラス、特定の個人など)
        - 作成した通知を送信する
    - **MVP賞**
        - MVPの投票を行える(投票の対象は一年生と二年生。三年生以上への投票はできない)
        - 一人三点で総合得点に加算し、最終的な総合得点の高いクラスがMVPとなる
        - これは管理者アプリのみで閲覧可能
    - **出席点**
        - 開会式の出席点の応じて、クラスごとの得点を自動で付与する
        - (当日参加の人数 / クラスの人数) * 10 = 出席点
        - あらかじめクラスの人数を登録しておき、当日参加の人数を入力することで自動で出席点を計算し反映させる


## 学生

学生は、大会に関する情報を閲覧したら、競技に参加したりするための権限を持つ。

- アクセス可能なアプリ
    - 学生用アプリ
- 権限と機能
    - **ダッシュボード**
        - 自身が参加する競技の一覧を表示する
        - 当日に予定されている自身の試合情報を表示する
    - **競技一覧・詳細閲覧**
        - 開催される全スポーツの一覧を閲覧する
        - 各スポーツの詳細ページを閲覧する
            - ルールや概要を確認する
            - トーナメントの現在の進徳状態をリアルタイムで確認する
            - 確認した試合結果をリアルタイムで確認する
    - **QRコード発行**
        - 自信を識別するための一意のQRコードを画面に表示する
    - **得点一覧**
        - 全クラスの現在の総得点を一覧で閲覧する
        - 表示順をソートする(自分のクラス、競技名、得点上位など)
    - **トーナメント表の閲覧**
        - 各競技のトーナメント表を閲覧する(編集不可)
    - **通知**
        - 管理者から送信された通知を一覧で確認する
        - 各通知の詳細内容を閲覧する

# 得点表の構成

- (初期点) <- 秋季スポーツ大会でのみ使用。春季スポーツ大会の総合得点(出席点含む)。
- (春スポアンケート点) <- 秋季スポーツ大会でのみ使用。
- 出席点
- 競技(第一体育館)の一勝点
- 競技(第一体育館)の二勝点
- 競技(第一体育館)の三勝点
- 競技(第一体育館)の優勝点
- 競技(第二体育館)の一勝点
- 競技(第二体育館)の二勝点
- 競技(第二体育館)の三勝点
- 競技(第二体育館)の優勝点
- 競技(グラウンド)の一勝点
- 競技(グラウンド)の二勝点
- 競技(グラウンド)の三勝点
- 競技(グラウンド)の優勝点
- 競技(昼)の勝ち点
- 得点 <- 出席点から競技(昼)の勝ち点までの総和。
- 順位 <- 得点の順位。
- (総合得点) <- 秋季スポーツ大会でのみ使用。初期点と得点の総和。
- (総合順位) <- 秋季スポーツ大会でのみ使用。総合得点の順位。